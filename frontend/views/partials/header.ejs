<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= typeof title !=='undefined' ? title : 'LearnHub' %> | Online Learning
    </title>
    <meta name="description"
        content="<%= typeof description !=='undefined' ? description : 'LearnHub is the premier platform for online courses. detailed courses on Programming, Design, Finance, and more.' %>">
    <meta name="keywords" content="online courses, learning, programming, design, finance, learnhub">
    <meta property="og:title" content="<%= typeof title !=='undefined' ? title : 'LearnHub' %>">
    <meta property="og:description"
        content="<%= typeof description !=='undefined' ? description : 'Advance your career with our extensive collection of high-quality courses.' %>">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1200&q=80">
    <link rel="stylesheet" href="/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Check for saved theme preference or system preference
        const savedTheme = localStorage.getItem('theme');
        const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        const theme = savedTheme || systemTheme;
        document.documentElement.setAttribute('data-theme', theme);

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateIcon(newTheme);
        }

        function updateIcon(theme) {
            const icon = document.getElementById('theme-icon');
            if (icon) {
                icon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
            }
        }

        document.addEventListener('DOMContentLoaded', () => updateIcon(document.documentElement.getAttribute('data-theme')));
    </script>
</head>

<body>
    <% if (typeof success_msg !=='undefined' && success_msg && success_msg.length> 0) { %>
        <script> document.addEventListener('DOMContentLoaded', () => Swal.fire('Success', '<%= success_msg %>', 'success')); </script>
        <% } %>
            <% if (typeof error_msg !=='undefined' && error_msg && error_msg.length> 0) { %>
                <script> document.addEventListener('DOMContentLoaded', () => Swal.fire('Error', '<%= error_msg %>', 'error')); </script>
                <% } %>

                    <nav class="navbar">
                        <div class="container">
                            <a href="/" class="logo">LearnHub</a>
                            <button class="hamburger-btn" onclick="toggleMenu()"
                                style="display: none; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-main);">â˜°</button>

                            <!-- Mobile Menu Wrapper -->
                            <div class="nav-links" id="navLinks">
                                <button class="close-btn" onclick="toggleMenu()"
                                    style="display: none; align-self: flex-end; background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--text-main); margin-bottom: 1rem;">&times;</button>

                                <a href="/">Home</a>
                                <a href="/courses">Browse Courses</a>
                                <button class="theme-toggle" onclick="toggleTheme()" id="theme-icon">ðŸŒ™</button>
                                <% if (typeof user !=='undefined' && user) { %>
                                    <a href="/courses/my-courses">My Learning</a>
                                    <% if (user.role==='admin' ) { %>
                                        <a href="/admin/dashboard">Admin</a>
                                        <% } %>
                                            <div
                                                style="display: flex; align-items: center; gap: 1rem; flex-direction: column; width: 100%;">
                                                <span style="font-weight: 500;">
                                                    <%= user.name %>
                                                </span>
                                                <a href="/auth/logout" class="btn btn-secondary"
                                                    style="padding: 0.5rem 1rem; width: 100%; text-align: center;">Logout</a>
                                            </div>
                                            <% } else { %>
                                                <a href="/auth/login" class="btn btn-secondary"
                                                    style="width: 100%; text-align: center;">Login</a>
                                                <a href="/auth/register" class="btn btn-primary"
                                                    style="color: black; width: 100%; text-align: center;">Sign Up</a>
                                                <% } %>
                            </div>
                        </div>
                        </div>
                    </nav>
                    <script>
                        function toggleMenu() {
                            const nav = document.getElementById('navLinks');
                            const overlay = document.getElementById('navOverlay');
                            nav.classList.toggle('active');
                            if (overlay) overlay.classList.toggle('active');
                        }
                    </script>
                    <!-- Overlay for closing -->
                    <div id="navOverlay" onclick="toggleMenu()"
                        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); opacity: 0; pointer-events: none; transition: 0.3s; z-index: 99;">
                    </div>
                    </div>
                    </nav>
                    <main>